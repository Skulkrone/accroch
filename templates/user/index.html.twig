{% extends 'base.html.twig' %}

{% block title %}
    {% for user in users %}
        Espace Client - {{ user.username }}
    {% endfor %}
{% endblock %}

{% block body %}

    <h1 class="text-bold text-white">Espace Client</h1>

    <div class="container-fluid">

        <div class="row text-center">

            <div class="col-sm table-user" style="max-width: 24rem;">
                <h2 class="card-body text-dark">Mes Annonces</h2>

                <ul>
                    {% for user in users %}
                        {% for annonce in user.fkAnnouncements %}
                            {% if user.id is same as(app.user.id) %}
                                <li class="text-left"><a href="{{ path('announcements_show', {'id': annonce.id}) }}" title="{{ annonce.Description }}" >{{ annonce.Description }}</a></li>
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                </ul>
                <a href="{{ path('announcements_new') }}">Ajouter une nouvelle annonce</a>
            </div>


            <div class="col-sm table-user" style="max-width: 24rem;">
                <h2 class="card-body text-dark">Mes Boutiques</h2>
                <ul>
                    {% for user in users %}
                        {% for boutique in user.fkShopId %}
                            {% if user.id is same as(app.user.id) %}
                                <li class="text-left"><a href="{{ path('shop_show', {'id': boutique.id}) }}" title="{{ boutique.Label }}" >{{ boutique.Label }}</a></li>
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                </ul>
                <a href="{{ path('shop_new') }}">Ajouter une nouvelle boutique</a>
            </div>

            <div class="columns table-user" style="max-width: 36rem;">
                {% for user in users %}
                    {% if user.id is same as(app.user.id) %}
                        <div class="col-sm">
                            <h2 class="card-body text-dark">{{ user.username }}</h2>
                            <img class="rounded mx-auto d-block" src="{{ asset('uploads/images/avatar/' ~ user.avatar) }}" alt="Responsive image">
                            <p><b>Nom : </b>{{ user.Name }}</p>
                            <p><b>Prénom : </b>{{ user.firstName }}</p>
                            <p><b>Email : </b>{{ user.email }}</p>
                            <a href="{{ path('user_show', {'id': user.id}) }}">Afficher</a>&nbsp&nbsp
                            <a href="{{ path('user_edit', {'id': user.id}) }}">Modifier</a>
                        </div>
                        {#{% elseif is_granted('ROLE_ADMIN') %} #}
                        <!--<div class="col-sm">
                            <h2 class="card-body text-dark">{{ user.username }}</h2>
                            <p>Id : {{ user.id }}</p>
                            <img class="rounded mx-auto d-block" src="{{ user.avatar }}" alt="Responsive image">
                            <p><b>Nom / Prénom : </b>{{ user.Name }}</p>
                            <p><b>Email : </b>{{ user.email }}</p>
                            <p><b>Rôle : </b>{{ user.roles[0] }}</p>
                            <a href="{{ path('user_show', {'id': user.id}) }}">Afficher</a>&nbsp&nbsp
                            <a href="{{ path('user_edit', {'id': user.id}) }}">Modifier</a>
                        </div>-->
                    {% endif %}
                {% endfor %}
            </div>

        </div>
    </div>

    {% if is_granted('ROLE_ADMIN') %}
        <div class="lien">
            <a href="{{ path('user_new') }}" class="text-bold text-white">Créer un nouvel utilisateur</a>
        </div>
    {% endif %}
{% endblock %}